<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="/module_energy/highchart401/js/highcharts.js"></script>
<script src="/module_energy/highchart401/js/highcharts-more.js"></script>
<script src="/module_energy/highchart401/js/modules/solid-gauge.js"></script>
<script src="/module_energy/highchart401/js/themes/dark-unica.js"></script>
<script type="text/javascript">
<!-- Generic Highcharts Config -->
$(function() {
    Highcharts.setOptions({
        exporting: {
            enabled: false
        },
        credits: {
            enabled: false
        }
    });
});

$(function () {

    var gaugeOptions = {

        chart: {
            type: 'solidgauge'
        },

        title: null,

        pane: {
            center: ['50%', '85%'],
            size: '100%',
            startAngle: -90,
            endAngle: 90,
            background: {
                backgroundColor: (Highcharts.theme && Highcharts.theme.background2) || '#EEE',
                innerRadius: '60%',
                outerRadius: '100%',
                shape: 'arc'
            }
        },

        tooltip: {
            enabled: false
        },

        // the value axis
        yAxis: {
            stops: [
                [0.1, '#55BF3B'], // green
                [0.5, '#DDDF0D'], // yellow
                [0.9, '#DF5353'] // red
            ],
            lineWidth: 0,
            minorTickInterval: null,
            tickPixelInterval: 400,
            tickWidth: 0,
            title: {
                y: -70
            },
            labels: {
                y: 16
            }
        },

        plotOptions: {
            solidgauge: {
                dataLabels: {
                    y: 5,
                    borderWidth: 0,
                    useHTML: true
                }
            }
        }
    };

    // The speed gauge
    $('#container-speed').highcharts(Highcharts.merge(gaugeOptions, {
        yAxis: {
            min: 0,
            max: <?php echo $this->todayMaxUsage; ?>,
            title: {
                text: 'Current Usage'
            }
        },

        credits: {
            enabled: false
        },

        series: [{
            name: 'Current Usage',
            data: [<?php echo $this->currentUsage; ?>],
            dataLabels: {
                format: '<div style="text-align:center"><span style="font-size:25px;color:' +
                    ((Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black') + '">{y}</span><br/>' +
                       '<span style="font-size:12px;color:silver">kW</span></div>'
            },
            tooltip: {
                valueSuffix: ' kW'
            }
        }]

    }));

    // The RPM gauge
    $('#container-rpm').highcharts(Highcharts.merge(gaugeOptions, {
        yAxis: {
            min: 0,
            max: <?php echo $this->todayMaxReturn; ?>,
            title: {
                text: 'Current Return'
            }
        },

        series: [{
            name: 'current Return',
            data: [<?php echo $this->currentReturn; ?>],
            dataLabels: {
                format: '<div style="text-align:center"><span style="font-size:25px;color:' +
                    ((Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black') + '">{y:.1f}</span><br/>' +
                       '<span style="font-size:12px;color:silver">kW</span></div>'
            },
            tooltip: {
                valueSuffix: ' revolutions/min'
            }
        }]

    }));




});

$(function () {
    $('#power').highcharts({
        chart: {
            type: 'line'
        },
        plotOptions: {
            series: {
                enableMouseTracking: false,
                lineWidth: 1,
                marker: {
                    enabled: false
                }
            }
        },
        title: {
            text: 'Daily energy usage'
        },
        subtitle: {
            text: 'pG stats'
        },
        xAxis: {
            categories: ['0','1','2','3','23'],
            tickInterval: 12,
            labels: {
                enabled: true
            }
        },
        yAxis: {
            title: {
                text: 'Energy (Watt)'
            },
            plotLines: [{
                value: 0,
                width: 1,
                color: '#808080'
            }]
        },
        series: [{
            name: 'Power Usage',
            data: [<?php echo $this->powerUsage; ?>]
        }, {
            name: 'Power Return',
            data: [<?php echo $this->powerReturn; ?>]
        }]
    });
});

$(function () {
    $('#powerByDay').highcharts({
        plotOptions: {
            column: {
                stacking: 'normal'
            },
            series: {
                pointPadding: 0.1,
                groupPadding: 0,
                borderWidth: 0,
                shadow: false
            },
        },
        tooltip: {
            headerFormat: '<span>{point.key}</span><table>',
            pointFormat: '<tr><td style="color:{series.color}">{series.name}: </td>' +
            '<td><b>{point.y:.1f} KWh</b></td></tr>',
            footerFormat: '</table>',
            shared: true,
            useHTML: true
        },
        title: {
            text: 'Daily energy usage'
        },
        subtitle: {
            text: 'last 30 days'
        },
        xAxis: {
            type: 'category',
            labels: {
                rotation: -45
            }
        },
        yAxis: {
            title: {
                text: 'Energy (KWh)'
            }
        },
        series: [{
            type: 'column',
            name: 'Power Usage Total',
            data: [<?php echo $this->powerUsageByDay; ?>],
            color: 'red'
        }, {
            type: 'column',
            name: 'Power Return Total',
            data: [<?php echo $this->powerReturnByDay; ?>],
            color: 'green'
        }, {
            type: 'spline',
            name: 'Average',
            data: [<?php echo $this->powerAverageByDay; ?>],
            marker: {
                lineWidth: 1,
                lineColor: Highcharts.getOptions().colors[3],
                fillColor: 'white'
            }
        }]
    });
});

$(function () {
    $('#powerByMonth').highcharts({
        plotOptions: {
            column: {
                stacking: 'normal'
            },
            series: {
                pointPadding: 0.1,
                groupPadding: 0,
                borderWidth: 0,
                shadow: false
            },
        },
        tooltip: {
            headerFormat: '<span>{point.key}</span><table>',
            pointFormat: '<tr><td style="color:{series.color}">{series.name}: </td>' +
            '<td><b>{point.y:.1f} KWh</b></td></tr>',
            footerFormat: '</table>',
            shared: true,
            useHTML: true
        },
        title: {
            text: 'Monthly energy usage'
        },
        subtitle: {
            text: 'last 12 months'
        },
        xAxis: {
            type: 'category',
            labels: {
                rotation: -45
            }
        },
        yAxis: {
            title: {
                text: 'Energy (KWh)'
            }
        },
        series: [{
            type: 'column',
            name: 'Power Usage Total',
            data: [<?php echo $this->powerUsageByMonth; ?>],
            color: 'red'
        }, {
            type: 'column',
            name: 'Power Return Total',
            data: [<?php echo $this->powerReturnByMonth; ?>],
            color: 'green'
        }, {
            type: 'spline',
            name: 'Average',
            data: [<?php echo $this->powerAverageByMonth; ?>],
            marker: {
                lineWidth: 1,
                lineColor: Highcharts.getOptions().colors[3],
                fillColor: 'white'
            }
        }]
    });
});

$(function () {
    $('#gasByDay').highcharts({
        chart: {
            type: 'column'
        },
        plotOptions: {
            column: {
                stacking: 'normal',
                dataLabels: {
                    enabled: false
                }
            }
        },
        title: {
            text: 'Daily gas usage'
        },
        subtitle: {
            text: 'last 30 days'
        },
        xAxis: {
            type: 'category',
            labels: {
                rotation: -45
            }
        },
        yAxis: {
            title: {
                text: 'Gas (m3)'
            },
            plotLines: [{
                value: 0,
                width: 1
            }]
        },
        series: [{
            name: 'Gas Usage Total',
            data: [<?php echo $this->gasByDay; ?>]
        }]
    });
});

$(function () {
    $('#gasByMonth').highcharts({
        chart: {
            type: 'column'
        },
        plotOptions: {
            column: {
                stacking: 'normal',
                dataLabels: {
                    enabled: false
                }
            }
        },
        title: {
            text: 'Monthly gas usage'
        },
        subtitle: {
            text: ''
        },
        xAxis: {
            type: 'category',
            labels: {
                rotation: -45
            }
        },
        yAxis: {
            title: {
                text: 'Gas (m3)'
            },
            plotLines: [{
                value: 0,
                width: 1
            }]
        },
        series: [{
            name: 'Gas Usage Total',
            data: [<?php echo $this->gasByMonth; ?>]
        }]
    });
});
</script>
<!-- div class="row">
    <div class="col-md-3" id="container-speed" style="min-height: 200px;"></div>
    <div class="col-md-3" id="container-rpm" style="min-height: 200px;"></div>
    <div class="col-md-3" id="container-rpm"></div>
    <div class="col-md-3" id="container-rpm"></div>
</div -->

<div class="row">
    <div class="col-md-3"><div class="well well-lg">
        <p>Current Usage: <?php echo $this->currentUsage; ?> W</p>
    </div></div>
    <div class="col-md-3"><div class="well well-lg">
        <p>Current Return: <?php echo $this->currentReturn; ?> W</p>
    </div></div>
    <div class="col-md-3"><div class="well well-lg">
        <p>Today Usage: <?php echo $this->todayUsage; ?> kWh</p>
    </div></div>
    <div class="col-md-3"><div class="well well-lg">
        <p>Today Return: <?php echo $this->todayReturn; ?> kWh</p>
    </div></div>
</div>

<div class="row">
    <div class="col-md-12" id="power" style="min-width: 310px; height: 400px; margin-top: 20px"></div>
</div>
<div class="row">
    <div class="col-md-12" id="powerByDay" style="min-width: 310px; height: 400px; margin-top: 20px"></div>
</div>
<div class="row">
    <div class="col-md-12" id="powerByMonth" style="min-width: 310px; height: 400px; margin-top: 20px"></div>
</div>
<div class="row">
    <div class="col-md-12" id="gasByDay" style="min-width: 310px; height: 400px; margin-top: 20px"></div>
</div>
<div class="row">
    <div class="col-md-12" id="gasByMonth" style="min-width: 310px; height: 400px; margin-top: 20px"></div>
</div>